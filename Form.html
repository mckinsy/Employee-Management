<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
 
<%@page language="java"
import ="java.util.*"
import ="com.empcontroller.*"
import ="com.empmodule.*" %>

<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Employee Management</title>
<style>
* {
	margin: 0;
	padding: 0;
	outline:none;
}

.parent {
	padding: 2% 0%;
	text-align: left;
	box-shadow: 0px 0px 10px black;
	height: 0%;
	width: 40%;
	display: flex;
	position: relative;
	left: 31%;
	top: 60px;
	align-items: center;
	justify-content: center;
	background-color:white;
}
body
{
	background:linear-gradient(to right, black, white, black);
}

#address {
	height: 75px; padding : 2%; width : 421px;
	border: 0px solid gray;
	border-radius: 3px;
	box-shadow: 0px 0px 3px darkgreen;
	padding: 2%;
	width: 421px;
	resize:none;
}

.labeL1 {
	margin-right: -1%;
}

.child {
	width: 80%;
}

.inp {
	display: block;
	margin: 8% 0%;
}

.name {
	display: flex;
	width: 100%; align-items : center;
	justify-content: center;
	align-items: center;
}

.box {
	height: 13%;
	width: 50%;
	border: 1px solid gray;
	padding: 7px;
	border-radius: 10px;
}

.add {
	display: flex;
	align-items: flex-start;
}

#dept {
	width: 40%;
	padding: 4px;
	border: 1px solid gray;
	box-shadow: 0px 2px 5px darkgreen;
}

.label2 {
	margin-right: 20px;
}

#dob {
	width: 25%;
	padding: 4px;
	border: 1px solid gray;
	box-shadow: 0px 2px 5px darkgreen;
}

.ip1 {
	margin: 0px 6px;
}

#button {
	padding: 2% 45%;
	background-color: darkolivegreen;
	color: white;
	border: none;
	border-radius: 5px;
	transition: 0.2s;
}

#button:hover {
	/*transform: translateY(-10px) scaleY(1.1);*/
	box-shadow: 0px 0px 20px darkolivegreen;
}

.edit
{
	color:white ; 
	text-decoration:none;
}

.edit:hover
{
	text-shadow: 0px 0px 10px black;
}

#table
{
	width:100%;
	text-align:center;
	color:white;
	background:linear-gradient(to right,blue,purple,blue,purple);
}
</style>

<script>

function display()
{
let Fname = document.querySelector('#Fname') //one value
let style = document.querySelectorAll('.box') //1<value
let Lname = document.querySelector('#Lname') //one value
let phno = document.querySelector('#phno')   //one value
let address = document.querySelector('#address')   //one value
let gender = document.querySelectorAll('.ip1') // value > 1
let skills = document.querySelectorAll('.ip2') // value > 1
let update = document.querySelectorAll('.tdata') // value > 1
let updateSkill = document.querySelector('#skillData') // value > 1
let department = document.querySelector('#dept') // value > 1
let skill = document.querySelector('#skillset')

let flag = true;

let table = document.querySelector('#table')

let s=[];

let notEmpty=0;

if(Fname.value=="")
	{
	  style[0].style.border='1px solid red'
	  flag=false;
	  return
	}
else {style[0].style.border='1px solid black'; flag=true;}

update[0].innerText=Fname.value
update[1].innerText=Lname.value

if(phno.value=="")
	{
		phno.style.border='1px solid red'
		flag=false
		return
	}
else {phno.style.border='1px solid black'; flag = true;}
	
update[2].innerText=phno.value

for(let i=0;i<gender.length;i++)
{
	if(gender[i].checked)
		update[3].innerText=gender[i].value
	}
	
for(let i=0;i<5;i++)
{
	if(skills[i].checked) {notEmpty++;s.push(skills[i].value)}
}

if(notEmpty==0) { document.getElementById('skll').style.color='red'; flag =false;}

else {
		document.getElementById('skll').style.color='black'; 
		skill.value = s.join(",")
		updateSkill.innerText=skill.value
		flag=true
	 }

if(address.value=="")
	{
	address.style.boxShadow = '0px 0px 3px red'
	flag=false;
	}
	else address.style.boxShadow = '0px 0px 3px darkgreen'
	
update[4].innerText=document.querySelector('#dob').value
update[5].innerText=department.value
update[6].innerText=address.value

/*if(flag)
	{
	  let form = document.querySelector('#userData')
	  form.submit();
	}*/

}

function addEmployee()
{
	let row = table.insertRow();
	let cell1 = row.insertCell();
	let cell2 = row.insertCell();
	let cell3 = row.insertCell();
	let cell4 = row.insertCell();
	let cell5 = row.insertCell();
	let cell6 = row.insertCell();
	let cell7 = row.insertCell();
	let cell8 = row.insertCell();
	let cell9 = row.insertCell();
	let cell10 = row.insertCell();
	cell1.innerHTML = "";
	cell2.innerHTML = "<td class=\"tdata\"></td>";
	cell3.innerHTML = "<td class=\"tdata\"></td>";
	cell4.innerHTML = "<td class=\"tdata\"></td>";
	cell5.innerHTML = "<td class=\"tdata\"></td>";
	cell6.innerHTML = "<td id=\"skillData\"></td>";
	cell7.innerHTML = "<td class=\"tdata\"></td>";
	cell8.innerHTML = "<td class=\"tdata\"></td>";
	cell9.innerHTML = "<td class=\"tdata\"></td>";
	cell10.innerHTML = "<a href=\"#\" class=\"edit\">Edit</a>"
	
}

</script>

</head>
<body>
	<div class="parent">
		<div class="child">

			<form id="userData" onSubmit="" action="send" method="post">
			<div class=name>
				<label class="labeL1">First Name*
				<input onChange='display()' id="Fname" class="box" name="fname" type="text" placeholder="First name" required>
				</label> 
				<label class="labeL1">Last Name
				<input onChange='display()' id="Lname" class="box" name="lname" type="text" placeholder="(optional)">
				</label>
			</div>

			<div class="inp">
				<label>Phone number*</label> 
				<input onChange='display()' id="phno" name="phn" class="box" type="tel" pattern="[9]{1}[0-9]{9}" placeholder="phone number"  required>
			</div>

			<div class="inp1">
				<label for="" class="label2">Gender*</label> 
				<input class="ip1" type="radio" name="gender" value="M" checked >Male
				<input class="ip1" type="radio" name="gender" value="F">Female
			</div>

			<div class="inp">
				<label id="skll" class="label2">Skills*</label> 
				<input onChange="display()" class="ip2" type="checkbox" value="HTML">HTML
				<input onChange="display()" class="ip2" type="checkbox" value="CSS">CSS
				<input onChange="display()" class="ip2" type="checkbox" value="JS">JavaScript 
				<input onChange="display()" class="ip2" type="checkbox" value="MySql">MySQL
				<input onChange="display()" class="ip2" type="checkbox" value="Java">Java
				<input id="skillset" name="skill" type="hidden" value="">
			</div>

			<div class="inp">
				<label class="label2">DOB*</label> 
				<input id="dob" type="date" required name="dob" value="1990-07-21">
			</div>

			<div class="inp">
				<label class="label2">Department*</label> 
				<select onChange='display()' name="department" id="dept">
					<option value="CS">Computer Science</option>
					<option value="IT">Information Technology</option>
					<option value="EC">Electronics communication</option>
					<option value="EE">Electrical Engineering</option>
					<option value="ME">Mechanical Engineering</option>
				</select>
			</div>

			<div class="inp">
				<div class="add">
					<label class="label2">Address*</label>
					<textarea onChange='display()' required placeholder="Address" name="Address" id="address"></textarea>
				</div>
			</div>
 
			<button id="button" type="submit">
				<h3>Submit</h3></button>
			 </form>
		</div>
	</div>
	<br><br><br><br><br><hr> <br><br>
	
	<table border="2" id="table">

    <!-- <tr bgcolor="grey"> this removes boundary b/w two columns make them common colour -->
    <tr>

    <th bgcolor="grey">Id</th>
    <th bgcolor="grey">First Name</th>
    <th bgcolor="grey">Last Name</th>
    <th bgcolor="grey">Phone Number</th>
    <th bgcolor="grey">Gender</th>
    <!--  th bgcolor="grey" colspan="5">Skills</th>-->
    <th bgcolor="grey">Skills</th>
    <th bgcolor="grey">DOB</th>
    <th bgcolor="grey">Department</th>
    <th bgcolor="grey">Address</th>
    <th bgcolor="grey">Action</th>

    </tr>
    
     <% ArrayList<Employee> emp = (ArrayList<Employee>)request.getAttribute("data");
	   if(emp!=null)
	   {
		for(Employee s:emp)
		{
		if (s != null)
		{
	   System.out.println(s);
        %> 
            <tr> 
                <td><%=s.getId()%></td> 
                <td><%=s.getName()%></td> 
                <td><%=s.getLname()%></td> 
                <td><%=s.getPh()%></td> 
                <td><%=s.getGender()%></td> 
                <td><%=s.getSkills()%></td> 
                <td><%=s.getDob()%></td>
                <td><%=s.getDepartment()%></td> 
                <td><%=s.getAddress()%></td> 
                <td><a class="edit" href="">Edit</a></td>
            </tr> 
		<%}
		}
		}
        %>
        
        <tr style='display:none;'> 
                <td id="empID"></td> 
                <td class="tdata"></td> 
                <td class="tdata"></td> 
                <td class="tdata"></td> 
                <td class="tdata"></td> 
                <td id="skillData"></td> 
                <td class="tdata"></td>
                <td class="tdata"></td> 
                <td class="tdata"></td> 
            </tr> 
</table>
</body>
</html>
